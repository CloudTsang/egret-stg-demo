var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},__extends=function(t,e){function i(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;n>i;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},__rest=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]]);return i},__decorate=function(t,e,i,n){var s,r=arguments.length,o=3>r?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(3>r?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},__param=function(t,e){return function(i,n){e(i,n,t)}},__metadata=function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},__awaiter=function(t,e,i,n){function s(t){return t instanceof i?t:new i(function(e){e(t)})}return new(i||(i=Promise))(function(i,r){function o(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?i(t.value):s(t.value).then(o,a)}h((n=n.apply(t,e||[])).next())})},__generator=function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,o,a,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},__exportStar=function(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||__createBinding(e,t,i)},__createBinding=Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]},__values=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,s,r=i.call(t),o=[];try{for(;(void 0===e||e-->0)&&!(n=r.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(i=r["return"])&&i.call(r)}finally{if(s)throw s.error}}return o},__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__spreadArrays=function(){for(var t=0,e=0,i=arguments.length;i>e;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;i>e;e++)for(var r=arguments[e],o=0,a=r.length;a>o;o++,s++)n[s]=r[o];return n},__await=function(t){return this instanceof __await?(this.v=t,this):new __await(t)},__asyncGenerator=function(t,e,i){function n(t){u[t]&&(l[t]=function(e){return new Promise(function(i,n){c.push([t,e,i,n])>1||s(t,e)})})}function s(t,e){try{r(u[t](e))}catch(i){h(c[0][3],i)}}function r(t){t.value instanceof __await?Promise.resolve(t.value.v).then(o,a):h(c[0][2],t)}function o(t){s("next",t)}function a(t){s("throw",t)}function h(t,e){t(e),c.shift(),c.length&&s(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=i.apply(t,e||[]),c=[];return l={},n("next"),n("throw"),n("return"),l[Symbol.asyncIterator]=function(){return this},l},__asyncDelegator=function(t){function e(e,s){i[e]=t[e]?function(i){return(n=!n)?{value:__await(t[e](i)),done:"return"===e}:s?s(i):i}:s}var i,n;return i={},e("next"),e("throw",function(t){throw t}),e("return"),i[Symbol.iterator]=function(){return this},i},__asyncValues=function(t){function e(e){n[e]=t[e]&&function(n){return new Promise(function(s,r){n=t[e](n),i(s,r,n.done,n.value)})}}function i(t,e,i,n){Promise.resolve(n).then(function(e){t({value:e,done:i})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=t[Symbol.asyncIterator];return s?s.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__setModuleDefault=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e},__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&__createBinding(e,t,i);return __setModuleDefault(e,t),e},__importDefault=function(t){return t&&t.__esModule?t:{"default":t}},__classPrivateFieldGet=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},__reflect=function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i};!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(e){return t[e]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){i(1),i(2),i(3),i(4),i(0),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(36),i(37),i(38),i(39),i(40),i(41),i(42),i(43);var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),this.startAnimation(t),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){console.log(egret.Capabilities.os),LifecycleCallback.regist(),this.toTitle()},e.prototype.toTitle=function(t){void 0===t&&(t=null);var e=new TitleScene(this.stage);this.stage.addChild(e),e.addEventListener(PlayEvents.START,this.toStage,this),this.currentScene=e},e.prototype.toStage=function(t){void 0===t&&(t=null),this.currentScene&&this.currentScene.dispose();var e=new StageScene(this.stage);this.stage.addChild(e),setTimeout(function(){e.startPlay()},1e3),this.currentScene=e},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){},e}(eui.UILayer);window.Main=n,__reflect(n.prototype,"Main",[])},function(t,e){var i=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();window.AssetAdapter=i,__reflect(i.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(t,e){var i=function(){function t(){}return t.BUFF_GAIN="BUFF_GAIN",t.BUFF_LOSE="BUFF_LOSE",t.PLAYER_SHOT="PLAYER_SHOT",t.RECYCLEABLE="RECYCLEABLE",t.DRIFT_MISS="DRIFT_MISS",t.DRIFT_BREAK="DRIFT_BREAK",t.DRIFT_GET="DRIFT_GET",t.START="START",t.RETRY="RETRY",t.CLEAR="CLEAR",t.GAME_OVER="GAME_OVER",t}();window.PlayEvents=i,__reflect(i.prototype,"PlayEvents",[]);var n;!function(t){t[t.ROOKIE=0]="ROOKIE",t[t.NORMAL=1]="NORMAL",t[t.ELITE=2]="ELITE",t[t.EXTREME=3]="EXTREME"}(n||(n={})),window.AIType=n;var s;!function(t){t[t.SLIGHT_AVOID=0]="SLIGHT_AVOID",t[t.AVOID=1]="AVOID",t[t.DASH_AVOID=2]="DASH_AVOID",t[t.TRACE=3]="TRACE",t[t.DASH_TRACE=4]="DASH_TRACE",t[t.GETBUFF=5]="GETBUFF",t[t.SPARE=6]="SPARE",t[t.IMPACT=7]="IMPACT",t[t.BARRAGE=8]="BARRAGE"}(s||(s={})),window.AIActType=s;var r;!function(t){t[t.BULLET_BOOST_BIG=0]="BULLET_BOOST_BIG",t[t.BULLET_BOOST_3DIRECT=1]="BULLET_BOOST_3DIRECT",t[t.BULLET_BOOST_5DIRECT=2]="BULLET_BOOST_5DIRECT",t[t.BULLECT_BOOST_PLUS2DIRECT=3]="BULLECT_BOOST_PLUS2DIRECT",t[t.BARRIER=4]="BARRIER",t[t.INVINSIBLE=5]="INVINSIBLE",t[t.SUB_PLANE=6]="SUB_PLANE",t[t.INF_DASH=7]="INF_DASH",t[t.DASH_INVINS=8]="DASH_INVINS"}(r||(r={})),window.BuffType=r;var o=function(){function t(){}return t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.Z=90,t.X=88,t.C=67,t}();window.Keyboard=o,__reflect(o.prototype,"Keyboard",[])},function(t,e){var i=function(){function t(){}return t.random=function(t,e){return Math.random()*(e-t)+t},t.getMc=function(t,e){void 0===e&&(e=-1);var i=RES.getRes(t+"_json"),n=RES.getRes(t+"_png"),s=new egret.MovieClipDataFactory(i,n),r=new egret.MovieClip(s.generateMovieClipData());return r},t.loadImage=function(t,e,i,n){var s=new egret.ImageLoader;s.crossOrigin="anonymous",s.load(t),s.once(egret.Event.COMPLETE,i,e),s.once(egret.IOErrorEvent.IO_ERROR,n,e)},t.httpReq=function(t,e,i,n,s,r,o,a){"GET"==i&&(t=t+"?"+e);var h=new egret.HttpRequest;h.open(t,i),h.setRequestHeader("Accept","*/*"),a&&h.setRequestHeader("Authorization",a),h.setRequestHeader("Content-Type",o),"GET"==i?h.send():h.send(e),h.addEventListener(egret.Event.COMPLETE,s,n),null!=r&&(h.addEventListener(egret.IOErrorEvent.IO_ERROR,r,n),h.addEventListener(egret.HTTPStatusEvent.CLOSE,r,n))},t.Loaded=function(){window.parent.postMessage({isLoadComplete:!0,url:window.location.href},"*")},t}();window.GlobalMethod=i,__reflect(i.prototype,"GlobalMethod",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);window.LoadingUI=i,__reflect(i.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(t,e){var i=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();window.DebugPlatform=i,__reflect(i.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new i)},function(t,e){var i=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var a=t.replace(".exml","_EUI.json");generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(a,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();window.ThemeAdapter=i,__reflect(i.prototype,"ThemeAdapter",["eui.IThemeAdapter"])},function(t,e){var i=function(t){function e(e,i,n){void 0===n&&(n="");var s=t.call(this)||this;return s.type=e,s.duration=i,s.label=n,i>0&&(s.timer=new egret.Timer(s.duration/100,100),s.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,s.delBuff,s)),s}return __extends(e,t),e.prototype.onPause=function(){this.timer&&this.timer.stop()},e.prototype.onResume=function(){this.timer&&this.timer.start()},e.prototype.delBuff=function(t){void 0===t&&(t=null),this.dispatchEvent(new egret.Event(PlayEvents.BUFF_LOSE)),this.timer&&this.timer.reset()},e.prototype.getType=function(){return this.type},e.prototype.startEffect=function(t){this.owner=t,this.timer&&this.timer.start()},e}(egret.EventDispatcher);window.Buff=i,__reflect(i.prototype,"Buff",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=-1),t.call(this,BuffType.BULLET_BOOST_BIG,e,"B")||this}return __extends(e,t),e.prototype.startEffect=function(t){this.owner=t;var e=t;e.setBulletGenerator(BulletLV2.pool),Bullet.allArr=[]},e.prototype.delBuff=function(e){void 0===e&&(e=null);var i=this.owner;i.setBulletGenerator(Bullet.pool),t.prototype.delBuff.call(this,e),Bullet.allArr=[]},e}(Buff);window.BigBulletBuff=i,__reflect(i.prototype,"BigBulletBuff",[])},function(t,e){var i=function(){function t(t){this._plane=t}return t.getBuffData=function(t){switch(t){case BuffType.INVINSIBLE:return{type:t,defaultDuration:5e3,label:"★"};case BuffType.BULLET_BOOST_BIG:return{type:t,defaultDuration:2e4,label:"B"};case BuffType.BULLECT_BOOST_PLUS2DIRECT:return{type:t,defaultDuration:1e4,label:"+2"};case BuffType.SUB_PLANE:return{type:t,defaultDuration:15e3,label:"S"}}return null},t.prototype.getBuff=function(t,e){var i;switch(t){case BuffType.INVINSIBLE:this.invinsibleBuff=new InvinsibleBuff(e),i=this.invinsibleBuff;break;case BuffType.BULLET_BOOST_BIG:this.bigBulletBuff=new BigBulletBuff(e),i=this.bigBulletBuff;break;case BuffType.BULLET_BOOST_3DIRECT:this.direction3BulletBuff=new Direction3BulletBuff(e),i=this.direction3BulletBuff;break;case BuffType.BULLET_BOOST_5DIRECT:this.direction5BulletBuff=new Direction5BulletBuff(e),i=this.direction5BulletBuff;break;case BuffType.BULLECT_BOOST_PLUS2DIRECT:this.directionPlus2BullectBuff=new DirectionPlus2BullectBuff(e),i=this.directionPlus2BullectBuff;break;case BuffType.SUB_PLANE:this.subPlaneBuff=new SubPlaneBuff(e),i=this.subPlaneBuff}i&&(i.startEffect(this._plane),i.addEventListener(PlayEvents.BUFF_LOSE,this.loseBuff,this))},t.prototype.loseBuff=function(t){void 0===t&&(t=null);var e=t.target;switch(e.getType()){case BuffType.INVINSIBLE:this.invinsibleBuff=null;break;case BuffType.BULLET_BOOST_BIG:this.bigBulletBuff=null;break;case BuffType.BULLET_BOOST_3DIRECT:this.direction3BulletBuff=null;break;case BuffType.BULLET_BOOST_5DIRECT:this.direction5BulletBuff=null;break;case BuffType.BULLECT_BOOST_PLUS2DIRECT:this.directionPlus2BullectBuff=null;break;case BuffType.SUB_PLANE:this.subPlaneBuff=null}},t.prototype.dispose=function(){this.bigBulletBuff&&this.bigBulletBuff.delBuff(),this.dashInvinsibleBuff&&this.dashInvinsibleBuff.delBuff(),this.direction3BulletBuff&&this.direction3BulletBuff.delBuff(),this.direction5BulletBuff&&this.direction5BulletBuff.delBuff(),this.directionPlus2BullectBuff&&this.directionPlus2BullectBuff.delBuff(),this.invinsibleBuff&&this.invinsibleBuff.delBuff(),this.subPlaneBuff&&this.subPlaneBuff.delBuff()},t.prototype.onPause=function(){this.bigBulletBuff&&this.bigBulletBuff.onPause(),this.dashInvinsibleBuff&&this.dashInvinsibleBuff.onPause(),this.direction3BulletBuff&&this.direction3BulletBuff.onPause(),this.direction5BulletBuff&&this.direction5BulletBuff.onPause(),this.directionPlus2BullectBuff&&this.directionPlus2BullectBuff.onPause(),this.invinsibleBuff&&this.invinsibleBuff.onPause(),this.subPlaneBuff&&this.subPlaneBuff.onPause()},t.prototype.onResume=function(){this.bigBulletBuff&&this.bigBulletBuff.onResume(),this.dashInvinsibleBuff&&this.dashInvinsibleBuff.onResume(),this.direction3BulletBuff&&this.direction3BulletBuff.onResume(),this.direction5BulletBuff&&this.direction5BulletBuff.onResume(),this.directionPlus2BullectBuff&&this.directionPlus2BullectBuff.onResume(),this.invinsibleBuff&&this.invinsibleBuff.onResume(),this.subPlaneBuff&&this.subPlaneBuff.onResume()},t}();window.BuffManager=i,__reflect(i.prototype,"BuffManager",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=800),t.call(this,BuffType.DASH_INVINS,e,"")||this}return __extends(e,t),e}(Buff);window.DashInvinsibleBuff=i,__reflect(i.prototype,"DashInvinsibleBuff",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=-1),t.call(this,BuffType.BULLET_BOOST_3DIRECT,e,"+2")||this}return __extends(e,t),e.prototype.startEffect=function(t){this.owner=t;var e=t;e.bulletDirections=[[-1,-1],[0,-1],[1,-1]]},e}(Buff);window.Direction3BulletBuff=i,__reflect(i.prototype,"Direction3BulletBuff",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=-1),t.call(this,BuffType.BULLET_BOOST_5DIRECT,e,"+2")||this}return __extends(e,t),e.prototype.startEffect=function(t){this.owner=t;var e=t;e.bulletDirections=[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0]]},e}(Buff);window.Direction5BulletBuff=i,__reflect(i.prototype,"Direction5BulletBuff",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=-1),t.call(this,BuffType.BULLECT_BOOST_PLUS2DIRECT,e,"+2")||this}return __extends(e,t),e.prototype.startEffect=function(e){t.prototype.startEffect.call(this,e),this.owner=e;var i=e;1==i.bulletDirections.length?i.bulletDirections=[[-1,-1],[0,-1],[1,-1]]:3==i.bulletDirections.length&&(i.bulletDirections=[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0]])},e.prototype.delBuff=function(e){void 0===e&&(e=null);var i=this.owner;5==i.bulletDirections.length?i.bulletDirections=[[-1,-1],[0,-1],[1,-1]]:3==i.bulletDirections.length&&(i.bulletDirections=[[0,-1]]),t.prototype.delBuff.call(this,e)},e}(Buff);window.DirectionPlus2BullectBuff=i,__reflect(i.prototype,"DirectionPlus2BullectBuff",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=3e3),t.call(this,BuffType.INVINSIBLE,e,"★")||this}return __extends(e,t),e.prototype.startEffect=function(t){this.owner=t,this._invisibleTween=egret.Tween.get(this.owner,{loop:!0}).set({alpha:0}).wait(100).set({alpha:1}).wait(100),this.timer&&this.timer.start()},e.prototype.delBuff=function(e){void 0===e&&(e=null),this._invisibleTween.pause().set({alpha:1}),t.prototype.delBuff.call(this,e)},e}(Buff);window.InvinsibleBuff=i,__reflect(i.prototype,"InvinsibleBuff",[])},function(t,e){var i=function(t){function e(e){return void 0===e&&(e=-1),t.call(this,BuffType.SUB_PLANE,e,"S")||this}return __extends(e,t),e.prototype.startEffect=function(e){t.prototype.startEffect.call(this,e),this.owner=e;var i=e;this._subA=new SubPlane(i,"LEFT"),this._subB=new SubPlane(i,"RIGHT")},e.prototype.delBuff=function(e){void 0===e&&(e=null),this._subA.dispose(),this._subB.dispose(),t.prototype.delBuff.call(this,e)},e}(Buff);window.SubPlaneBuff=i,__reflect(i.prototype,"SubPlaneBuff",[])},function(t,e){var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y)},e}(egret.Sprite);window.CollisionObject=i,__reflect(i.prototype,"CollisionObject",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.maxHP=1,e._stage=egret.MainContext.instance.stage,e.HP=e.maxHP,e}return __extends(e,t),e.prototype.hit=function(){this.HP--},e.prototype.isDefeated=function(){return 0==this.HP},e}(CollisionObject);window.BaseCharacter=i,__reflect(i.prototype,"BaseCharacter",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.pWidth=30,e.pHeight=50,e.pColor=16777215,e.speed=10,e.shotSpeed=200,e.dashing=!1,e.dashDistance=200,e.dashSpeed=250,e.maxDashGauge=3,e.curDashGauge=3,e.buffManager=new BuffManager(e),e.dashGaugeTimer=new egret.Timer(3e3),e.dashGaugeTimer.addEventListener(egret.TimerEvent.TIMER,e.onDashRecover,e),e._right=egret.MainContext.instance.stage.stageWidth,e._bottom=egret.MainContext.instance.stage.stageHeight,e.shotTimer=new egret.Timer(e.shotSpeed,1),e}return __extends(e,t),e.prototype.onPause=function(){this.dashGaugeTimer.stop(),this.shotTimer.stop(),this.buffManager.onPause()},e.prototype.onResume=function(){this.dashGaugeTimer.start(),this.shotTimer.start(),this.buffManager.onResume()},e.prototype.draw=function(){this.graphics.beginFill(this.pColor),this.graphics.moveTo(-this.pWidth,this.pHeight),this.graphics.lineTo(this.pWidth,this.pHeight),this.graphics.lineTo(0,-this.pHeight),this.graphics.endFill()},e.prototype.move=function(t,e){if(!this.dashing){var i=this.x+t*(this.speed+this.pWidth),n=this.y+e*(this.speed+this.pHeight);0>i||this._right<i||0>n||this._bottom<n||(this.x+=t*this.speed,this.y+=e*this.speed)}},e.prototype.dash=function(t,e){var i=this;if(!this.dashing&&0!=this.curDashGauge&&(0!=t||0!=e)){this.dashGaugeTimer.running||this.dashGaugeTimer.start(),this.curDashGauge--,this.dashing=!0;var n=this.x+t*this.dashDistance,s=this.y+e*this.dashDistance,r=this.dashSpeed,o=!1;if(0>n?(o=!0,n=this.pWidth):this._right<n&&(o=!0,n=this._right-this.pWidth),0>s?(o=!0,s=this.pHeight):this._bottom<s&&(o=!0,s=this._bottom-this.pHeight),o){var a=new egret.Point(this.x,this.y),h=new egret.Point(n,s),l=egret.Point.distance(a,h);r=l*this.dashSpeed/this.dashDistance}var u={x:n,y:s};egret.Tween.get(this).to(u,r).call(function(){i.dashing=!1})}},e.prototype.onDashRecover=function(t){this.curDashGauge<this.maxDashGauge&&this.curDashGauge++,this.curDashGauge==this.maxDashGauge&&this.dashGaugeTimer.reset()},e.prototype.isInvinsible=function(){return this.dashing||null!=this.buffManager.invinsibleBuff},e.prototype.shot=function(){if(!this.shotTimer.running){for(var t=0;t<this.bulletDirections.length;t++){var e=this.bulletGenerator.getOne();e.x=this.x,e.y=this.y-this.pHeight-50;var i=this.bulletDirections[t];e.setDirection(i[0],i[1]),this.parent.addChild(e),e.shoot()}this.shotTimer.start()}},e.prototype.setBulletGenerator=function(t){this.bulletGenerator=t},e.prototype.getBulletGenerator=function(){return this.bulletGenerator},e.prototype.getCurDashGauge=function(){return this.curDashGauge},e.prototype.setBuff=function(t,e){this.buffManager.getBuff(t,e)},e.prototype.crash=function(){this.buffManager.dispose(),this.parent&&this.parent.removeChild(this)},e.prototype.refreshPosition=function(){t.prototype.refreshPosition.call(this),this.collisionPoints=[new egret.Point(this.x-this.pWidth,this.y),new egret.Point(this.x+this.pWidth,this.y),new egret.Point(this.x,this.y-this.pHeight),new egret.Point(this.x,this.y+this.pHeight)]},e.prototype.getCollisionPoints=function(){return this.collisionPoints},e.prototype.collisionCheck=function(t){for(var e=0,i=this.getCollisionPoints();e<i.length;e++){var n=i[e];if(t.hitTestPoint(n.x,n.y))return!0}return!1},e}(BaseCharacter);window.BasePlane=i,__reflect(i.prototype,"BasePlane",[])},function(t,e){var i=function(){function t(t){this._arr=[],this._func=t}return t.prototype.getOne=function(){for(var t=null,e=0,i=this._arr;e<i.length;e++){var n=i[e];if(!n.activate){t=n;break}}return t||(t=this._func(),this._arr.push(t)),t.activate=!0,t},t.prototype.recycle=function(t){void 0===t&&(t=null);var e=t.target;e.activate=!1},t.prototype.dispose=function(){this._arr=null,this._func=null},t}();window.Pool=i,__reflect(i.prototype,"Pool",[])},function(t,e){var i=function(t){function e(e,i,n,s,r){void 0===e&&(e=10),void 0===i&&(i=16775885),void 0===n&&(n=0),void 0===s&&(s=-1),void 0===r&&(r=20);var o=t.call(this)||this;return o._stage=egret.MainContext.instance.stage,o.activate=!1,o.size=e,o.color=i,o.directX=n,o.directY=s,o.speed=r,o.draw(),o.loadPartical(),o}return __extends(e,t),e.prototype.setDirection=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this.directX=t,this.directY=e},e.prototype.shoot=function(){this.activate=!0,this._sp.visible=!0,this._blastBmp&&(this._blastBmp.visible=!1),this._blastPartical&&(this._blastPartical.visible=!1)},e.prototype.onFly=function(t){void 0===t&&(t=null),this.x+=this.directX*this.speed,this.y+=this.directY*this.speed,(this.x<-100||this.x>this._stage.stageWidth||this.y<-100||this.y>this._stage.stageHeight)&&this.disposeImmediately()},e.prototype.dispose=function(){var t=this;this.blast(),setTimeout(function(){t.activate=!1,t.parent&&t.parent.removeChild(t)},200)},e.prototype.disposeImmediately=function(){this.activate=!1,this.parent&&this.parent.removeChild(this)},e.prototype.draw=function(){var t=new egret.Sprite;t.graphics.beginFill(this.color),t.graphics.drawCircle(0,0,this.size),t.graphics.endFill(),t.x=-this.size/2,t.y=-this.size/2,this.addChild(t),this._sp=t,this._sp.visible=!0},e.prototype.drawBlast=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#bulletblast"),t.width=4*this.size,t.height=4*this.size,t.x=2*-this.size,t.y=2*-this.size,this.addChild(t),this._blastBmp=t,this._blastBmp.visible=!1},e.prototype.loadPartical=function(){this._blastPartical=new particle.GravityParticleSystem(RES.getRes("blast_png"),RES.getRes("blast_json")),this.addChild(this._blastPartical)},e.prototype.blast=function(){this._sp.visible=!1,this._blastBmp&&(this._blastBmp.visible=!0),this._blastPartical&&(this._blastPartical.visible=!0,this._blastPartical.start())},e.prototype.refreshPosition=function(){t.prototype.refreshPosition.call(this),this.collisionPoints=[new egret.Point(this.x,this.y)]},e.prototype.getCollisionPoints=function(){return this.collisionPoints},e.prototype.collisionCheck=function(t){for(var e=0,i=this.getCollisionPoints();e<i.length;e++){var n=i[e];if(t.hitTestPoint(n.x,n.y))return!0}return!1},e.pool=new Pool(function(){var t=new e;return e.allArr.push(t),t}),e.allArr=[],e}(CollisionObject);window.Bullet=i,__reflect(i.prototype,"Bullet",["IPoolObject"])},function(t,e){var i=function(t){function e(){return t.call(this,15,16766720,0,-1,30)||this}return __extends(e,t),e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#bullet"),t.width=2*this.size,t.height=2*this.size,t.x=-this.size,t.y=-this.size,this.addChild(t),this._sp=t},e.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y),this.collisionPoints=[new egret.Point(this.x,this.y-this.width),new egret.Point(this.x-this.width,this.y),new egret.Point(this.x+this.width,this.y)]},e.prototype.getCollisionPoints=function(){return this.collisionPoints},e.pool=new Pool(function(){var t=new e;return Bullet.allArr.push(t),t}),e}(Bullet);window.BulletLV2=i,__reflect(i.prototype,"BulletLV2",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e._arr=[],e}return __extends(e,t),e.prototype.setDashTime=function(t){if(t>this._arr.length)for(var e=this._arr.length;t>e;e++){var i=this.drawIcon();i.x=-i.width*(e+1),this.addChild(i),this._arr.push(i)}for(var e=0;e<this._arr.length;e++)this._arr[e].visible=t>e},e.prototype.drawIcon=function(){var t=new egret.Bitmap,e=RES.getRes("sheet_json#jet");return t.texture=e,t.width*=.5,t.height*=.5,t},e}(egret.Sprite);window.DashGauge=i,__reflect(i.prototype,"DashGauge",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;e.buff=null,e._directionX=1,e._directionY=1,e.maxHP=3,e.HP=3,e.draw();var i=Math.floor(5*Math.random())/10+.4;return e._topY=(e._stage.stageHeight-e._stage.stageHeight*i)/2,e._bottomY=e._stage.stageHeight-e._topY,e._directionX=2*Math.floor(2*Math.random())-1,e._rightBorder=e._stage.stageWidth+100,e._leftBorder=-100,-1==e._directionX?e.x=e._rightBorder:e.x=e._leftBorder,e.y=Math.floor(Math.random()*(e._bottomY-e._topY))+e._topY,e._speedX=(3*Math.random()+3)*e._directionX,e._speedY=(15*Math.random()+10)*e._directionY,e}return __extends(e,t),e.prototype.move=function(){return this.y+=this._speedY,this.x+=this._speedX,this.y>=this._bottomY&&1==this._directionY?(this._directionY=-this._directionY,this._speedY=-this._speedY):this.y<=this._topY&&-1==this._directionY&&(this._directionY=-this._directionY,this._speedY=-this._speedY),this.x<-100||this.x>this._rightBorder?(this.dispatchEvent(new egret.Event(PlayEvents.DRIFT_MISS)),!1):!0},e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#drift"),t.width=80,t.height=80,t.x=0,t.y=0,this.addChild(t)},e.prototype.change2Buff=function(t){if(void 0===t&&(t=null),!t){var e=[BuffType.BULLET_BOOST_BIG,BuffType.BULLECT_BOOST_PLUS2DIRECT,BuffType.INVINSIBLE,BuffType.SUB_PLANE];t=e[Math.floor(Math.random()*e.length)]}var i=BuffManager.getBuffData(t);this.buff=i,this.drawBuff()},e.prototype.drawBuff=function(){if(this.buff){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#buff"),t.width=100,t.height=100,t.x=0,t.y=0;var e=new egret.TextField;e.bold=!0,e.size=80,e.textColor=0,e.width=100,e.height=100,e.verticalAlign=egret.VerticalAlign.MIDDLE,e.textAlign=egret.HorizontalAlign.CENTER,e.text=this.buff.label,this.removeChildren(),this.addChild(t),this.addChild(e)}},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this)},e.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y),this.collisionPoints=[new egret.Point(this.x+this.width/2,this.y+this.height/2)]},e.prototype.getCollisionPoints=function(){return this.collisionPoints},e.prototype.collisionCheck=function(t){for(var e=0,i=this.getCollisionPoints();e<i.length;e++){var n=i[e];
if(t.hitTestPoint(n.x,n.y))return!0}return!1},e}(BaseCharacter);window.Drift=i,__reflect(i.prototype,"Drift",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e._movePoint=null,e._dx=0,e._dy=0,e.draw(),e.maxHP=5,e.HP=5,e.pWidth=30,e.pHeight=50,e.pColor=16711680,e.speed=4,e.shotSpeed=1e3,e.shotTimer.delay=e.shotSpeed,e.aiCfg=new AIConfig(e),e.bulletDirections=[[0,1]],e.bulletGenerator=EnemyBullet.pool,e._bulletDistribute=[0,0,0,0],e._border=[e.width,e._stage.stageWidth-e.width,e.height,e._stage.stageHeight-e.height],e._curPattern=AIActType.SPARE,e}return __extends(e,t),e.prototype.shot=function(){this.shotTimer.running||(this.shotTimer.repeatCount=0,this.shotTimer.addEventListener(egret.TimerEvent.TIMER,this.onShot,this),this.shotTimer.start())},e.prototype.stop=function(){this.shotTimer.running&&(this.shotTimer.removeEventListener(egret.TimerEvent.TIMER,this.onShot,this),this.shotTimer.stop())},e.prototype.onShot=function(){if(this.parent)for(var t=0;t<this.bulletDirections.length;t++){var e=this.bulletGenerator.getOne();e.x=this.x,e.y=this.y-this.pHeight+50;var i=this.bulletDirections[t];e.setDirection(i[0],i[1]),this.parent.addChild(e),e.shoot()}},e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#plane4"),t.width=4*this.pWidth,t.height=4*this.pHeight,t.x=2*-this.pWidth,t.y=2*-this.pHeight,this.addChild(t)},e.prototype.refreshPosition=function(){t.prototype.refreshPosition.call(this),this._bulletDistribute=[0,0,0,0]},e.prototype.playerReg=function(t){if(t.position){this._playerPosition=t.position,this.checkShouldShot();var e=Math.abs(this.x-t.x),i=egret.Point.distance(t.position,this.position),n=e/this.width,s=i/this.height;this.aiCfg.checkIfPositive();return 1>s?void this.setCurPattern(AIActType.IMPACT):n>3?void this.setCurPattern(AIActType.DASH_TRACE):3>n?void this.setCurPattern(AIActType.TRACE):void 0}},e.prototype.bulletReg=function(t){if(t.position&&!this.dashing){var e=t.position;if(e.x<this.x&&e.y<this.y-this.pHeight)return void this._bulletDistribute[0]++;if(e.x>this.x&&e.y<this.y-this.pHeight)return void this._bulletDistribute[1]++;e.x<this.x&&e.y>this.y?this._bulletDistribute[2]++:e.x>this.x&&e.y>this.y&&this._bulletDistribute[3]++;var i=egret.Point.distance(this.position,t.position),n=i/this.height,s=t.position.x>this.x-this.pWidth&&t.position.x<this.x+this.pWidth;if(s||!(n>1))return!s&&1>n?void this.setCurPattern(AIActType.SLIGHT_AVOID):s&&2>n&&0==this.curDashGauge?(this.setCurPattern(AIActType.AVOID),void(this._movePoint=null)):s&&1>n?(this.setCurPattern(AIActType.DASH_AVOID),void(this._movePoint=null)):void 0}},e.prototype.driftReg=function(t){if(t.position&&t.buff){this._driftPosition=t.position;var e=egret.Point.distance(this.position,t.position);e<3*this.height&&this.setCurPattern(AIActType.GETBUFF)}},e.prototype.refreshMove=function(){var t;if(this._shouldShot?this.shot():this.stop(),!this.dashing&&this._curPattern!=AIActType.SPARE){this._movePoint&&(this.x+=this._dx*this.speed,this.y+=this._dy*this.speed);var e=this.getLessBulletDirection();switch(this._curPattern){case AIActType.DASH_AVOID:return this.dash(e[0],e[1]),void(this._curPattern=AIActType.TRACE);case AIActType.AVOID:t=GlobalMethod.random(this.width,2*this.width),this._movePoint=new egret.Point(this.x+e[0]*t,this.y+e[1]*t);break;case AIActType.SLIGHT_AVOID:t=GlobalMethod.random(this.width/2,this.width),this._movePoint=new egret.Point(this.x+e[0]*t,this.y+e[1]*t);break;case AIActType.TRACE:this._movePoint=new egret.Point(this._playerPosition.x,this.y);break;case AIActType.DASH_TRACE:return this._playerPosition.x>this.x?this.dash(1,0):this.dash(-1,0),void(this._movePoint=new egret.Point(this._playerPosition.x,this.y));case AIActType.IMPACT:this._movePoint=this._playerPosition;break;case AIActType.GETBUFF:this._movePoint=this._driftPosition}null!=this._movePoint&&(this.getDirectionFromMovePoint(),this.x+=this._dx*this.speed,this.y+=this._dy*this.speed,(-1==this._dx&&this.x<=this._movePoint.x||1==this._dx&&this.x>=this._movePoint.x)&&(this.setCurPattern(AIActType.SPARE),this._movePoint=null))}},e.prototype.setCurPattern=function(t){this._curPattern!=t&&this._curPattern!=AIActType.DASH_AVOID&&(this._curPattern=t)},e.prototype.moveFinish=function(){this._movePoint=null,this._curPattern=AIActType.SPARE},e.prototype.crash=function(){this.stop(),t.prototype.crash.call(this)},e.prototype.getDirectionFromMovePoint=function(){this._movePoint&&(this._movePoint.x>this.x+this.speed?this._dx=1:this._movePoint.x<this.x-this.speed?this._dx=-1:this._dx=0,this._movePoint.y>this.y+this.speed?this._dy=1:this._movePoint.y<this.y-this.speed?this._dy=-1:this._dy=0)},e.prototype.checkShouldShot=function(){this._playerPosition&&(this._playerPosition.x>this.x-2*this.width&&this._playerPosition.x<this.x+2*this.width?this._shouldShot=!0:this._shouldShot=!1)},e.prototype.getLessBulletDirection=function(){for(var t=Math.min.apply(Math,this._bulletDistribute),e=0;e<this._bulletDistribute.length;e++)if(!(0==e&&(this.x<this._border[0]||this.y<this._border[2])||1==e&&(this.x>this._border[1]||this.y<this._border[2])||2==e&&(this.x<this._border[0]||this.y>this._border[3])||3==e&&(this.x>this._border[1]||this.y>this._border[3])||this._bulletDistribute[e]!=t))switch(e){case 0:return[-1,-1];case 1:return[1,-1];case 2:return[-1,1];case 3:return[1,1]}var i=this.x>this._stage.stageWidth-this.x?-1:1,n=this.y>this._stage.stageHeight-this.y?-1:1;return[i,n]},e}(BasePlane);window.EnemyPlane=i,__reflect(i.prototype,"EnemyPlane",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.maxHP=8,e.HP=8,e.speed=12,e.shotSpeed=500,e.shotTimer.delay=e.shotSpeed,e.maxDashGauge=5,e.curDashGauge=5,e}return __extends(e,t),e.prototype.checkShouldShot=function(){this._shouldShot=!0},e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#plane3"),t.width=4*this.pWidth,t.height=4*this.pHeight,t.x=2*-this.pWidth,t.y=2*-this.pHeight,this.addChild(t)},e}(EnemyPlane);window.EliteEnemyPlane=i,__reflect(i.prototype,"EliteEnemyPlane",[])},function(t,e){var i=function(t){function e(){return t.call(this,12,13047173,0,1)||this}return __extends(e,t),e.pool=new Pool(function(){var t=new e;return e.allArr.push(t),t}),e.allArr=[],e}(Bullet);window.EnemyBullet=i,__reflect(i.prototype,"EnemyBullet",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.maxHP=10,e.HP=10,e.speed=15,e.shotSpeed=450,e.shotTimer.delay=e.shotSpeed,e.maxDashGauge=10,e.curDashGauge=10,e}return __extends(e,t),e.prototype.checkShouldShot=function(){this._shouldShot=!0},e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#plane3"),t.width=4*this.pWidth,t.height=4*this.pHeight,t.x=2*-this.pWidth,t.y=2*-this.pHeight,this.addChild(t)},e.prototype.refreshMove=function(){var t;if(this._shouldShot?this.shot():this.stop(),!this.dashing&&this._curPattern!=AIActType.SPARE){if(this._movePoint)return this.x+=this._dx*this.speed,this.y+=this._dy*this.speed,void(-1==this._dx&&this.x<=this._movePoint.x||1==this._dx&&this.x>=this._movePoint.x?this._movePoint=null:0==this._dx&&0==this._dy&&(this._movePoint=null));var e=this.getLessBulletDirection();switch(this._curPattern){case AIActType.DASH_AVOID:return this.dash(e[0],e[1]),void(this._curPattern=AIActType.TRACE);case AIActType.AVOID:t=GlobalMethod.random(this.width,2*this.width),this._movePoint=new egret.Point(this.x+e[0]*t,this.y+e[1]*t);break;case AIActType.SLIGHT_AVOID:t=GlobalMethod.random(this.width/2,this.width),this._movePoint=new egret.Point(this.x+e[0]*t,this.y+e[1]*t);break;case AIActType.BARRAGE:this._playerPosition&&(this._playerPosition.x<this.x-this.width?this._movePoint=new egret.Point(this._playerPosition.x-this.width,this.y):this._playerPosition.x>this.x+this.width?this._movePoint=new egret.Point(this._playerPosition.x+this.width,this.y):(this._curPattern=AIActType.TRACE,this._movePoint=new egret.Point(this._playerPosition.x,this.y)));break;case AIActType.TRACE:this._movePoint=new egret.Point(this._playerPosition.x,this.y);break;case AIActType.DASH_TRACE:return this._playerPosition.x>this.x?this.dash(1,0):this.dash(-1,0),void(this._movePoint=new egret.Point(this._playerPosition.x,this.y));case AIActType.IMPACT:this._movePoint=this._playerPosition;break;case AIActType.GETBUFF:this._movePoint=this._driftPosition}null!=this._movePoint&&(this.getDirectionFromMovePoint(),this.x+=this._dx*this.speed,this.y+=this._dy*this.speed,(-1==this._dx&&this.x<=this._movePoint.x||1==this._dx&&this.x>=this._movePoint.x)&&(this.setCurPattern(AIActType.SPARE),this._movePoint=null))}},e.prototype.setCurPattern=function(e){e==AIActType.TRACE&&(e=AIActType.BARRAGE),t.prototype.setCurPattern.call(this,e)},e}(EnemyPlane);window.ExtremeEnemyPlane=i,__reflect(i.prototype,"ExtremeEnemyPlane",[])},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.maxHP=5,e.HP=5,e.pWidth=30,e.pHeight=50,e.pColor=65280,e.draw(),e.bulletDirections=[[0,-1]],e.bulletGenerator=Bullet.pool,e}return __extends(e,t),e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#plane1"),t.width=4*this.pWidth,t.height=4*this.pHeight,t.x=2*-this.pWidth,t.y=2*-this.pHeight,this.addChild(t)},e.prototype.dash=function(e,i){t.prototype.dash.call(this,e,i),this.dashGauge&&this.dashGauge.setDashTime(this.curDashGauge)},e.prototype.onDashRecover=function(e){t.prototype.onDashRecover.call(this,e),this.dashGauge&&this.dashGauge.setDashTime(this.curDashGauge)},e.prototype.crash=function(){t.prototype.crash.call(this),this.dispatchEvent(new egret.Event(PlayEvents.GAME_OVER))},e.prototype.shot=function(){this.shotTimer.running||(t.prototype.shot.call(this),this.dispatchEvent(new egret.Event(PlayEvents.PLAYER_SHOT)))},e}(BasePlane);window.PlayerPlane=i,__reflect(i.prototype,"PlayerPlane",[])},function(t,e){var i=function(t){function e(e,i){var n=t.call(this)||this;return n.followDelay=200,n.pWidth=20,n.pHeight=30,n.pColor=2263842,n.draw(),n._mainPlane=e,n._place=i,"LEFT"==i?n._offsetX=-e.width/2-n.width-50:n._offsetX=e.width/2+n.width+50,n._offsetY=e.height/2-n.height/2,n.x=e.x+n._offsetX,n.y=e.y+n._offsetY,e.parent.addChild(n),e.addEventListener(PlayEvents.PLAYER_SHOT,n.shot,n),n.bulletGenerator=e.getBulletGenerator(),n.move(0,0),n}return __extends(e,t),e.prototype.draw=function(){var t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#plane2"),t.width=4*this.pWidth,t.height=4*this.pHeight,t.x=2*-this.pWidth,t.y=2*-this.pHeight,this.addChild(t)},e.prototype.dispose=function(){this._moveTween&&(this._moveTween.pause(),this._moveTween=null),this._mainPlane.removeEventListener(PlayEvents.PLAYER_SHOT,this.shot,this),this.removeChildren(),this.parent&&this.parent.removeChild(this)},e.prototype.move=function(t,e){var i=this._mainPlane.x+this._offsetX,n=this._mainPlane.y+this._offsetY;if(i==this.x&&n==this.y)this._moveTween=egret.Tween.get(this).wait(200).call(this.move,this,[0,0]);else{var s={x:i,y:n};this._moveTween=egret.Tween.get(this).to(s,200).call(this.move,this,[0,0])}},e.prototype.shot=function(){var t=this.bulletGenerator.getOne();t.x=this.x,t.y=this.y-this.pHeight-50,t.setDirection(0,-1),this.parent.addChild(t),t.shoot()},e}(BasePlane);window.SubPlane=i,__reflect(i.prototype,"SubPlane",[])},function(t,e){var i=function(t){function e(e){var i=t.call(this)||this;return i._curAnalogX=0,i._curAnalogY=0,i._stageAnalogX=0,i._stageAnalogY=0,i.skinName="resource/eui_skins/ControlPanel.exml",i.addEventListener(eui.UIEvent.CREATION_COMPLETE,i.initData,i),i._stage=e,i}return __extends(e,t),e.prototype.initData=function(t){this.width=this._stage.stageWidth,this.btn_shot.x=this.width-this.btn_shot.width,this.btn_jet.x=this.btn_shot.x,this.btn_shot.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPressShot,this),this.btn_shot.addEventListener(egret.TouchEvent.TOUCH_END,this.onReleaseShot,this),this.btn_shot.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onReleaseShot,this),this.analog.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPressAnalog,this),this.analog.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onPressAnalog,this),this.analog.addEventListener(egret.TouchEvent.TOUCH_END,this.onReleaseAnalog,this),this.analog.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onReleaseAnalog,this),this._stageAnalogX=this.analog.x+this.x,this._stageAnalogY=this.analog.y+this.y,this.btn_jet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPressDash,this)},e.prototype.onPressShot=function(t){this.onKeyDown&&this.onKeyDown({keyCode:Keyboard.Z})},e.prototype.onReleaseShot=function(t){this.onKeyUp&&this.onKeyUp({keyCode:Keyboard.Z})},e.prototype.onPressDash=function(t){this.onKeyDown&&this.onKeyDown({keyCode:Keyboard.X})},e.prototype.onPressAnalog=function(t){var e=0,i=0;t.stageX>this._stageAnalogX?e=1:t.stageX==this._stageAnalogX?e=0:t.stageX<this._stageAnalogX&&(e=-1),t.stageY>this._stageAnalogY?i=1:t.stageY==this._stageAnalogY?i=0:t.stageY<this._stageAnalogY&&(i=-1),(e!=this._curAnalogX||i!=this._curAnalogY)&&(this._curAnalogX=e,this._curAnalogY=i,this.onDirectChange(e,i))},e.prototype.onReleaseAnalog=function(t){this._curAnalogX=0,this._curAnalogY=0,this.onDirectChange&&this.onDirectChange(this._curAnalogX,this._curAnalogY)},e}(eui.Component);window.ControlPanel=i,__reflect(i.prototype,"ControlPanel",[])},function(t,e){var i=function(){function t(){var t=this;this._lock=!0,this._shotTriggered=!1,this._directX=0,this._directY=0,document.addEventListener("keydown",function(e){t.onKeyDown(e)}),document.addEventListener("keyup",function(e){t.onKeyUp(e)})}return t.getInstance=function(){return t.ins||(t.ins=new t),t.ins},t.prototype.setPanel=function(t){var e=this;t.onDirectChange=function(t,i){e.setDirect(t,i)},t.onKeyDown=function(t){e.onKeyDown(t)},t.onKeyUp=function(t){e.onKeyUp(t)},this._panel=t},t.prototype.setControllee=function(t){this._controllee=t},t.prototype.setLock=function(t){this._lock=t},t.prototype.btnTrigger=function(t){void 0===t&&(t=null),(0!=this._directX||0!=this._directY)&&this._controllee.move(this._directX,this._directY),this._shotTriggered&&this._controllee.shot()},t.prototype.onKeyDown=function(t){if(!this._lock)switch(t.keyCode){case Keyboard.Z:this._shotTriggered=!0;break;case Keyboard.X:this._controllee.dash(this._directX,this._directY);break;case Keyboard.C:break;case Keyboard.LEFT:this._directX=-1;break;case Keyboard.UP:this._directY=-1;break;case Keyboard.RIGHT:this._directX=1;break;case Keyboard.DOWN:this._directY=1}},t.prototype.onKeyUp=function(t){switch(t.keyCode){case Keyboard.Z:this._shotTriggered=!1;break;case Keyboard.X:break;case Keyboard.C:break;case Keyboard.LEFT:-1==this._directX&&(this._directX=0);break;case Keyboard.UP:-1==this._directY&&(this._directY=0);break;case Keyboard.RIGHT:1==this._directX&&(this._directX=0);break;case Keyboard.DOWN:1==this._directY&&(this._directY=0)}},t.prototype.setDirect=function(t,e){this._directX=t,this._directY=e},t}();window.Controller=i,__reflect(i.prototype,"Controller",[])},function(t,e){var i=function(t){function e(e){var i=t.call(this)||this;return i.x=0,i.y=0,i.width=e.stageWidth,i.height=e.stageHeight,i.graphics.beginFill(8900331),i.graphics.drawRect(0,0,i.width,i.height),i.graphics.endFill(),i.display(),i}return __extends(e,t),e.prototype.display=function(){var t=new PlayerPlane;t.x=t.width/2,t.y=t.height/2;var e=new EnemyPlane;e.x=e.width/2,e.y=e.height/2,this.addChild(e)},e}(egret.Sprite);window.DisplayScene=i,__reflect(i.prototype,"DisplayScene",[])},function(t,e){var i=function(t){function e(e,i,n,s,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.skinName="resource/eui_skins/GameResult.exml",o.addEventListener(eui.UIEvent.CREATION_COMPLETE,o.initData,o),o._clear=e,o._time=i,o._bullet=n,o._hit=s,o._callBack=r,o}return __extends(e,t),e.prototype.initData=function(){this._clear?(this.txt_type.text="Stage Clear",this.txt_hit_type.text="被击中次数"):(this.txt_type.text="Game Over",this.txt_hit_type.text="击中次数"),this.txt_hit.text=this._hit+"次",this.txt_bullet.text=this._bullet+"颗";var t=Math.round(this._time/1e3),e=Math.floor(t/60);if(0==e)this.txt_time.text=t+"秒";else{var i=t%60;this.txt_time.text=e+"分 "+i+"秒"}this.btn_retry.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dispose=function(){this.btn_retry.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.parent&&this.parent.removeChild(this)},e.prototype.onClick=function(t){this._callBack?this._callBack(t):this.dispatchEvent(new egret.Event(PlayEvents.CLEAR))},e}(eui.Component);window.GameResult=i,__reflect(i.prototype,"GameResult",[])},function(t,e){var i=function(t){function e(e){var i=t.call(this)||this;i._enemy=[],i._stage=egret.MainContext.instance.stage,i._buffRate=.5,i._collisionCheckInterval=0,i.x=0,i.y=0,i.width=i._stage.stageWidth,i.height=i._stage.stageHeight;var n=RES.getRes("bg2_png"),s=new egret.Bitmap(n);return s.width=i.width,s.height=i.height,i.addChild(s),i._bg=s,LifecycleCallback.addFunc("StageScene",function(){i.onPause()},function(){i.onResume()}),i}return __extends(e,t),e.prototype.startPlay=function(){this.bgm&&(this.soundChannel.stop(),this.soundChannel=null,this.bgm.close(),this.bgm=null),this._gameResult&&this._gameResult.dispose(),this.initPlayer(),this.createEnemy(),this.initUI(),this.createDrift(),this.addEventListener(egret.Event.ENTER_FRAME,this.refreshStage,this),this._startTime=egret.getTimer(),this._playerBullet=0,this._playerHit=0,this._enemyHit=0},e.prototype.cleanStage=function(){try{this.removeEventListener(egret.Event.ENTER_FRAME,this.refreshStage,this),this._player.crash(),this._player=null;for(var t=0,e=this._enemy;t<e.length;t++){var i=e[t];i.crash()}this._enemy=[],this._driftTimer.stop(),this._driftTimer.removeEventListener(egret.TimerEvent.TIMER,this.onDriftTimer,this),this._driftTimer=null,this._drift&&this._drift.dispose(),this._drift=null,this.removeChild(this._dashGauge),this._controlPanel&&this.removeChild(this._controlPanel);for(var n=0,s=Bullet.allArr;n<s.length;n++){var r=s[n];r.disposeImmediately()}for(var o=0,a=EnemyBullet.allArr;o<a.length;o++){var r=a[o];r.disposeImmediately()}}catch(i){console.log(i)}},e.prototype.initPlayer=function(){var t=this,e=new PlayerPlane,i=Controller.getInstance();i.setControllee(e),this._player=e,this._playerController=i,e.x=this.stage.width/2-e.width,e.y=this.stage.height+e.height,e.setBuff(BuffType.INVINSIBLE,3e3),egret.Tween.get(e).to({y:this.stage.height-e.height-80},1e3).call(i.setLock,i,[!1]),e.addEventListener(PlayEvents.PLAYER_SHOT,function(e){t._playerBullet++},this),this.addChild(e)},e.prototype.createEnemy=function(){var t,e=this,i=Math.random(),n="normal_mp3";i>.5?t=new EnemyPlane:i>.2?(t=new EliteEnemyPlane,n="elite_mp3"):(t=new ExtremeEnemyPlane,n="extreme_mp3"),SoundManager.instance().play(n),t.x=this.stage.width/2+t.width,t.y=-t.height,egret.Tween.get(t).to({y:100},1e3).call(function(){e._enemy.push(t)},this),this.stage.addChild(t)},e.prototype.initUI=function(){if(egret.Capabilities.os.indexOf("Windows")<0){var t=new ControlPanel(this._stage);t.y=this._stage.stageHeight-t.height,this.addChild(t),this._controlPanel=t,this._playerController.setPanel(t)}var e=new DashGauge;e.setDashTime(3),e.x=this._stage.stageWidth-200,e.y=this._stage.stageHeight-e.height,this._dashGauge=e,this.addChild(this._dashGauge),this._player.dashGauge=this._dashGauge},e.prototype.createDrift=function(){this._driftTimer=new egret.Timer(2e3),this._driftTimer.addEventListener(egret.TimerEvent.TIMER,this.onDriftTimer,this),this._driftTimer.start()},e.prototype.onDriftTimer=function(t){Math.random()<this._buffRate||this._drift||this._driftTimer.currentCount%10==0&&(this._drift=new Drift,this.addChildAt(this._drift,1))},e.prototype.refreshStage=function(t){if(this._playerController.btnTrigger(),this.refreshAllPosition(),3!=this._collisionCheckInterval)return void this._collisionCheckInterval++;if(this._collisionCheckInterval=0,!this._player.isInvinsible())for(var e=0,i=this._enemy;e<i.length;e++){var n=i[e];if(!n.isInvinsible()&&this._player.collisionCheck(n))return this._player.crash(),void this.GameOver()}for(var s=0,r=Bullet.allArr;s<r.length;s++){var o=r[s];if(o.activate){for(var a=!1,h=0;h<this._enemy.length;h++){var l=this._enemy[h];if(!l.isInvinsible()&&o.collisionCheck(l)){if(console.log("enemy hit."),this._enemyHit++,l.hit(),l.setBuff(BuffType.INVINSIBLE,1e3),o.dispose(),a=!0,l.isDefeated()&&(l.crash(),this._enemy.splice(h,1)),0==this._enemy.length)return void this.StageClear();break}}this._drift&&o.collisionCheck(this._drift)&&!a&&(o.dispose(),this._drift.hit(),this._drift.isDefeated()&&this._drift.change2Buff())}}if(!this._player.isInvinsible())for(var u=0,c=EnemyBullet.allArr;u<c.length;u++){var o=c[u];if(o.activate){var a=!1;if(o.collisionCheck(this._player)){if(console.log("player hit"),this._playerHit++,this._player.hit(),this._player.setBuff(BuffType.INVINSIBLE,1e3),o.dispose(),a=!0,this._player.isDefeated())return this._player.crash(),void this.GameOver();break}this._drift&&o.collisionCheck(this._drift)&&!a&&(o.dispose(),this._drift.hit(),this._drift.isDefeated()&&this._drift.change2Buff())}}if(this._drift&&this._drift.buff){var f=!1;if(this._drift.collisionCheck(this._player)&&(this._player.setBuff(this._drift.buff.type,this._drift.buff.defaultDuration),this.removeChild(this._drift),this._drift=null,f=!0),!f)for(var p=0,d=this._enemy;p<d.length;p++){var _=d[p];if(this._drift.collisionCheck(_)){_.setBuff(this._drift.buff.type,this._drift.buff.defaultDuration),this.removeChild(this._drift),this._drift=null,f=!0;break}}}},e.prototype.refreshAllPosition=function(){this._player.refreshPosition();for(var t=0,e=this._enemy;t<e.length;t++){var i=e[t],n=i;n.refreshPosition(),n.playerReg(this._player);for(var s=0,r=Bullet.allArr;s<r.length;s++){var o=r[s];o.activate&&n.bulletReg(o)}this._drift&&n.driftReg(this._drift),n.refreshMove()}for(var a=0,h=Bullet.allArr;a<h.length;a++){var o=h[a];o.activate&&(o.onFly(),o.refreshPosition())}for(var l=0,u=EnemyBullet.allArr;l<u.length;l++){var o=u[l];o.activate&&(o.onFly(),o.refreshPosition())}if(null!=this._drift){var c=this._drift.move();this._drift.refreshPosition(),c||(this.removeChild(this._drift),this._drift=null)}},e.prototype.StageClear=function(){var t=this;console.log("stage clear."),this.cleanStage();var e=new GameResult(!0,egret.getTimer()-this._startTime,this._playerBullet,this._playerHit,function(e){t.startPlay()});e.x=(this._stage.width-e.width)/2,e.y=100,this._gameResult=e,this.addChild(e)},e.prototype.GameOver=function(){var t=this;console.log("game over."),this.cleanStage();var e=new GameResult(!1,egret.getTimer()-this._startTime,this._playerBullet,this._enemyHit,function(e){t.startPlay()});e.x=(this._stage.width-e.width)/2,e.y=100,this._gameResult=e,this.addChild(e)},e.prototype.onPause=function(){this._driftTimer&&this._driftTimer.stop(),this._player&&this._player.onPause();for(var t=0,e=this._enemy;t<e.length;t++){var i=e[t];i.onPause()}},e.prototype.onResume=function(){this._driftTimer&&this._driftTimer.start(),this._player&&this._player.onResume();for(var t=0,e=this._enemy;t<e.length;t++){var i=e[t];i.onResume()}},e.prototype.dispose=function(){this.cleanStage(),LifecycleCallback.removeFunc("StageScene")},e}(egret.Sprite);window.StageScene=i,__reflect(i.prototype,"StageScene",[])},function(t,e){var i=function(t){function e(e){var i=t.call(this)||this;i._stage=egret.MainContext.instance.stage,i.x=0,i.y=0,i.width=i._stage.stageWidth,i.height=i._stage.stageHeight;var n=RES.getRes("bg2_png"),s=new egret.Bitmap(n);return s.width=i.width,s.height=i.height,i.addChild(s),i._descript=new eui.Component,egret.Capabilities.os.indexOf("Windows")>=0?i._descript.skinName="resource/eui_skins/Description.exml":i._descript.skinName="resource/eui_skins/Description.1.exml",i._descript.x=(i._stage.stageWidth-i._descript.width)/2,i._descript.y=200,i.addChild(i._descript),i._startBtn=new eui.Button,i._startBtn.skinName="resource/eui_skins/ButtonSkin.exml",i._startBtn.label="开始",i._startBtn.width=300,i._startBtn.height=100,i._startBtn.labelDisplay.size=50,i._startBtn.x=(i._stage.stageWidth-i._startBtn.width)/2,i._startBtn.y=i._stage.stageHeight-150,i.addChild(i._startBtn),i._startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){i.dispatchEvent(new egret.Event(PlayEvents.START))},i),SoundManager.instance().play("title_mp3"),i}return __extends(e,t),e.prototype.dispose=function(){},e}(egret.Sprite);window.TitleScene=i,__reflect(i.prototype,"TitleScene",[])},function(t,e){var i=function(){function t(t,e){void 0===e&&(e=null),this._positiveRate=.5,this._evadeRate=1,this._traceRate=.7,this._traceAfterEvadeRate=.8,this._attackAfterTraceRate=.5,this._moveOnFreeRate=.6,this._attackOnFreeRate=.2,this._dashTraceRate=.4,this._dashEvadeRate=.8,this._reDelay=100,this._attackDelay=20,this._decisionDuration=5e3,this._negativeDistance=500,this._traceDistance=3,this._me=t}return t.prototype.checkIfPositive=function(){return 0==this._me.getCurDashGauge()?!1:this._isPositive},t.prototype.onTimer=function(t){this._isPositive=Math.random()<this._positiveRate},t.getAICfg=function(t){switch(t){case AIType.NORMAL:return{};case AIType.ROOKIE:break;case AIType.ELITE:break;case AIType.EXTREME:}},t}();window.AIConfig=i,__reflect(i.prototype,"AIConfig",[])},function(t,e){var i,i=window.CollisionUtils;!function(t){function e(t,e,i){var n=i.length;if(3>n)return!1;var s=0,r=[];for(s=0;s<i.length;s++){var o=new egret.Point(i[s].x,i[s].y);r.push(o)}for(s=0;s<r.length;s++)r[s].x+=e.x,r[s].y+=e.y;if(this.vectorCrossPoint(r[0],t,r[1])>0)return!1;if(this.vectorCrossPoint(r[0],t,r[n-1])<0)return!1;s=2;for(var a=n-1,h=-1;a>=s;){var l=s+a>>1;this.vectorCrossPoint(r[0],t,r[l])>0?(h=l,a=l-1):s=l+1}return 0>h?!1:this.vectorCrossPoint(r[h-1],t,r[h])<0}function i(t,e,i){return(e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y)}t.checkPointCollideShape=e,t.vectorCrossPoint=i}(i||(i={})),window.CollisionUtils=i},function(t,e){var i=function(){function t(){}return t}();window.Dialog=i,__reflect(i.prototype,"Dialog",[])},function(t,e){var i=function(){function t(){}return t.regist=function(){egret.lifecycle.onPause=this.onPause,egret.lifecycle.onResume=this.onResume},t.addFunc=function(e,i,s){t.map[e]=new n(i,s)},t.removeFunc=function(e){delete t.map[e]},t.onPause=function(){for(var e in t.map)t.map[e].onPause()},t.onResume=function(){for(var e in t.map)t.map[e].onResume()},t.map={},t}();window.LifecycleCallback=i,__reflect(i.prototype,"LifecycleCallback",[]);var n=function(){function t(t,e){this.onPause=t,this.onResume=e}return t}();window.LcyObj=n,__reflect(n.prototype,"LcyObj",[])},function(t,e){var i=function(){function t(){this.HTTP_URL="https://xxxx"}return t.prototype.dataFormat=function(t){if(t){var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join("&")}return""},t.prototype.getToken=function(){return sessionStorage.getItem("token")},t.prototype.requestGetImg=function(t,e){var i=this;return new Promise(function(n,s){var r=new egret.HttpRequest;i.dataFormat(e);r.responseType=egret.HttpResponseType.TEXT,r.open(t,egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,function(t){n()},i),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){s(t)},i)})},t.prototype.requestGet=function(t,e){var i=this;return new Promise(function(n,s){var r=new egret.HttpRequest,o=i.dataFormat(__assign(__assign({},e),{ucode:i.getToken()}));r.responseType=egret.HttpResponseType.TEXT,r.open(i.HTTP_URL+t+"?"+o,egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget;n(JSON.parse(e.response))},i)})},t.prototype.requestPost=function(t,e){var i=this;return new Promise(function(n,s){var r=new egret.HttpRequest,o=i.dataFormat(__assign(__assign({},e),{ucode:i.getToken()}));r.responseType=egret.HttpResponseType.TEXT,r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.open(i.HTTP_URL+t,egret.HttpMethod.POST),r.send(o),r.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget;e.response?n(JSON.parse(e.response)):(console.log("系统出错，请稍后再试"),s(t))},i),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("服务器连接失败，请稍后再试")},i)})},t}();window.RequestUtil=i,__reflect(i.prototype,"RequestUtil",[])},function(t,e){var i=function(){function t(){}return t.Debug=-1!==location.search.indexOf("dev")?!0:!1,t.env=-1!==location.search.indexOf("dev")?"dev":"pro",t}();window.Setting=i,__reflect(i.prototype,"Setting",[])},function(t,e){var i=function(){function t(){var t=this;LifecycleCallback.addFunc("bgm",function(){t.pause()},function(){t.resume()}),this._bgs={},this._defaultVolume=.5}return t.prototype.play=function(t,e){void 0===e&&(e=!0),this._bgm&&this._bgmChannel.stop(),this._bgm=RES.getRes(t),this._bgm.type=egret.Sound.MUSIC;try{if(this._isPausing)return;this._bgmChannel=this._bgm.play(0,e?0:1),this._bgmChannel.volume=this._defaultVolume}catch(i){console.error(i)}},t.prototype.playBgs=function(t){var e;e=this._bgs[t]?this._bgs[t]:RES.getRes(t),e&&e.play(0,1)},t.prototype.resume=function(){this._isPausing=!1,this._bgm&&this._bgmChannel&&(this._bgmChannel=this._bgm.play(this._bgmPosition,1),this._bgmChannel.volume=this._defaultVolume,this._bgmChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onResumeOver,this))},t.prototype.onResumeOver=function(t){this._bgm&&this._bgmChannel&&(this._bgmChannel=this._bgm.play(0,0),this._bgmChannel.volume=this._defaultVolume)},t.prototype.pause=function(){this._isPausing=!0,this._bgm&&this._bgmChannel&&(this._bgmPosition=this._bgmChannel.position,this._bgmChannel.stop())},t.prototype.stop=function(){this._bgm&&this._bgmChannel&&(this._bgmChannel.stop(),this._bgmChannel=null,this._bgm=null)},t.instance=function(){return t._ins||(t._ins=new t),t._ins},t}();window.SoundManager=i,__reflect(i.prototype,"SoundManager",[])},function(t,e){var i=function(){function t(t){this.p=t,console.log(t)}return t.print=function(t){Setting.Debug&&console.log(t)},t.addArmature=function(t,e){var i,n,s=RES.getRes(t.ske),r=RES.getRes(t.tex),o=RES.getRes(t.png),a=new dragonBones.EgretFactory,h=a.parseDragonBonesData(s);a.addDragonBonesData(h),a.addTextureAtlasData(a.parseTextureAtlasData(r,o)),i=a.buildArmature(h.armatureNames[0]),n=i.display,a.clock.add(i),e(i,n),egret.Ticker.getInstance().register(function(t){a.clock.advanceTime(1e-4)},this)},t.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},t.RoundRect=function(t,e,i){void 0===i&&(i=10);var n=new egret.Shape;n.graphics.beginFill(2631720),n.graphics.drawRoundRect(0,0,t.width,t.height,i,i),n.graphics.endFill(),n.y=t.x,n.x=t.y,e.addChild(n),t.mask=n},t.pressBtn=function(t,e){t.addEventListener(egret.TouchEvent.TOUCH_END,function(){e&&e()},this)},t.touchBtn=function(t,e,i){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(t).to({scaleX:.8,scaleY:.8},80,egret.Ease.cubicIn).call(function(){i&&i()})},this),t.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100,egret.Ease.cubicIn).call(function(){egret.Tween.removeTweens(t),e&&e()})},this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100,egret.Ease.cubicIn).call(function(){egret.Tween.removeTweens(t),e&&e()})})},t.itemTap=function(t,e){t.addEventListener(eui.ItemTapEvent.ITEM_TAP,function(i){var n=-1!=t.selectedIndex?t.selectedIndex:null,s=t.$indexToRenderer[n].$children[0];egret.Tween.get(s).to({scaleX:.9,scaleY:.9},80).to({scaleX:1,scaleY:1},50).call(function(){e&&e(t.selectedItem,n),egret.Tween.removeTweens(s)})},this)},t.ListChildClick=function(e,i,n){var s=e.$indexToRenderer;s.forEach(function(e,s){var r=e.$children[0],o=r.$children[i];t.touchBtn(o,function(){n(r,s)})})},t.dargMove=function(t,e,i,n,s,r,o){function a(t){if(c)if(2==d){if(2==u.names.length){u[t.touchPointID].x=t.stageX,u[t.touchPointID].y=t.stageY;
var i=h();o&&o(i/p,_)}}else e.x=t.stageX-f.x,e.y=t.stageY-f.y,_.x=e.x,_.y=e.y,s&&s(function(t){c=t,(c=!1)&&(u={names:[]},d=0)})}function h(){var t=0,e=u.names;return t=egret.Point.distance(u[e[e.length-1]],u[e[e.length-2]])}var l=this;void 0===i&&(i=!1);var u={names:[]},c=!1,f=new egret.Point,p=0,d=0,_={x:e.x,y:e.y};e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(s){null==u[s.touchPointID]&&1==i&&(u[s.touchPointID]=new egret.Point(s.stageX,s.stageY),u.names.push(s.touchPointID)),c=!0,d++,2==d?p=h():(f.x=s.stageX-e.x,f.y=s.stageY-e.y,n&&n(f)),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,a,l)},this),e.addEventListener(egret.TouchEvent.TOUCH_END,function(e){c=!1,u={names:[]},d=0,r&&r(),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,a,l)},this)},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e.texture},t.deepCopyObj=function(t){var e=Array.isArray(t)?[]:{};for(var i in t)t.hasOwnProperty(i)&&("object"==typeof t[i]&&null!==t[i]?e[i]=this.deepCopyObj(t[i]):e[i]=t[i]);return e},t.getUrlParam=function(t,e){var i=new RegExp("(\\?|&)"+t+"=([^&#]*)"),n=i.exec(e?e:location.href);return null!=n?decodeURIComponent(n[2]):null},t}();window.Tool=i,__reflect(i.prototype,"Tool",[])}]);